{"version":3,"sources":["firebase/config.js","firebase/service.js","components/Login/index.js","Context/AuthProvider.js","components/ChatRoom/UserInfo.js","hooks/useFirestore.js","Context/AppProvider.js","components/ChatRoom/RoomList.js","components/ChatRoom/SideBar.js","components/ChatRoom/ChatHeader.js","components/ChatRoom/Message.js","components/ChatRoom/ChatBox.js","components/ChatRoom/ChatWindows.js","components/ChatRoom/index.js","components/Modal/AddRoomModal.js","components/Modal/InviteUserModal.js","App.js","reportWebVitals.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getAnalytics","auth","db","firestore","window","location","hostname","useEmulator","addDocs","collection","data","add","createAt","FieldValue","serverTimestamp","generateKeywords","displayName","name","toLowerCase","split","filter","word","length","flagArray","result","stringArray","i","findPermutation","k","push","join","keywords","reduce","acc","cur","words","arrName","curName","forEach","letter","createKeywords","Title","Typography","fbProvider","FacebookAuthProvider","googleProvider","GoogleAuthProvider","Login","a","signInWithPopup","then","additionalUserInfo","user","isNewUser","email","uid","photoURL","providerID","providerId","catch","error","console","log","message","justify","span","style","textAlign","level","width","marginBottom","onClick","SpinStyled","styled","Spin","AuthContext","createContext","Authprovider","children","navigate","useNavigate","useState","setUser","isLoading","setLoading","useEffect","unsubcribed","onAuthStateChanged","Provider","value","size","UserInfoStyled","div","UserInfo","useContext","className","src","backgroundColor","charAt","toUpperCase","Text","ghost","icon","LogoutOutlined","signOut","useFirestore","condition","documents","setDocument","collectionRef","orderBy","compareValue","where","fieldName","operator","onSnapshot","snapshot","id","AppContext","Appprovider","isVisibleAddRoom","setIsVisibleAddRoom","isVisibleInviteUser","setIsVisibleInviteUser","selectedRoomId","setSelectedRoomId","conditionRooms","useMemo","rooms","selectedRoom","find","r","conditionUsers","members","users","PanelStyled","Collapse","Panel","RoomList","React","bordered","defaultActiveKey","header","map","room","Link","roomId","type","PlusSquareOutlined","SideBarStyled","Sidebar","ChatHeaderStyled","ChatHeader","description","shape","UserAddOutlined","Group","maxCount","title","placement","MessageStyled","TextStyled","Message","styleRight","seconds","formattedDate","formatRelative","Date","slice","formatDate","ChatRoomStyled","MessageListStyled","MessageInputStyled","ChatBox","Form","useForm","form","inputRef","useRef","sendMessage","getFieldValue","resetFields","current","focus","messages","onKeyDown","e","key","Item","ref","autoFocus","autoComplete","placeholder","suffix","ChatWindowsStyled","ChatWindows","closable","showIcon","ChatRoom","SideBar","AddRoomModal","addRoom","validateFields","values","err","errorInfo","visible","onOk","onCancel","layout","label","rules","required","DebounceSelect","fetchOptions","debounceTimeout","curMembers","options","setOptions","props","fetching","setFetching","debounceFetcher","debounce","newOptions","labelInValue","filterOption","onSearch","notFoundContent","opt","Option","lowerCase","str","w","fetchUserList","search","valueCompare","limit","get","docs","doc","includes","InviteUserModal","setValue","update","val","mode","onChange","newValue","App","AuthProvider","path","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4d9f3a29.chunk.js","sourcesContent":["import firebase from 'firebase/compat/app';\r\nimport { getAnalytics } from \"firebase/analytics\";\r\n\r\nimport 'firebase/compat/auth';\r\nimport 'firebase/compat/firestore';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDAZ0UDDoyO6Q7nUYRjTkAFzGd-C9fOm2Y\",\r\n  authDomain: \"chat-app-dbc83.firebaseapp.com\",\r\n  projectId: \"chat-app-dbc83\",\r\n  storageBucket: \"chat-app-dbc83.appspot.com\",\r\n  messagingSenderId: \"656128365474\",\r\n  appId: \"1:656128365474:web:c95a0e75be310eb976d8fb\",\r\n  measurementId: \"G-3BY0G5VWYJ\"\r\n};\r\n\r\nconst app = firebase.initializeApp(firebaseConfig);\r\ngetAnalytics(app);\r\n\r\nconst auth = firebase.auth();\r\nconst db = firebase.firestore();\r\n\r\nif (window.location.hostname === 'localhost') {\r\n  auth.useEmulator(\"http://localhost:9099\");\r\n  db.useEmulator(\"127.0.0.1\", \"8080\")\r\n}\r\n\r\nexport { auth, db };\r\nexport default firebase;","import firebase, { db } from './config';\r\n\r\nexport function addDocs(collection, data) {\r\n  const query = db.collection(collection);\r\n  query.add({\r\n    ...data,\r\n    createAt: firebase.firestore.FieldValue.serverTimestamp()\r\n  })\r\n}\r\n\r\n// tao keywords cho displayName, su dung cho search\r\nexport const generateKeywords = (displayName) => {\r\n  // liet ke tat cac hoan vi. vd: name = [\"David\", \"Van\", \"Teo\"]\r\n  // => [\"David\", \"Van\", \"Teo\"], [\"David\", \"Teo\", \"Van\"], [\"Teo\", \"David\", \"Van\"],...\r\n  const name = displayName.toLowerCase().split(' ').filter((word) => word);\r\n\r\n  const length = name.length;\r\n  let flagArray = [];\r\n  let result = [];\r\n  let stringArray = [];\r\n\r\n  /**\r\n   * khoi tao mang flag false\r\n   * dung de danh dau xem gia tri\r\n   * tai vi tri nay da duoc su dung\r\n   * hay chua\r\n   **/\r\n  for (let i = 0; i < length; i++) {\r\n    flagArray[i] = false;\r\n  }\r\n\r\n  const createKeywords = (name) => {\r\n    const arrName = [];\r\n    let curName = '';\r\n    name.split('').forEach((letter) => {\r\n      curName += letter;\r\n      arrName.push(curName);\r\n    });\r\n    return arrName;\r\n  };\r\n\r\n  function findPermutation(k) {\r\n    for (let i = 0; i < length; i++) {\r\n      if (!flagArray[i]) {\r\n        flagArray[i] = true;\r\n        result[k] = name[i];\r\n\r\n        if (k === length - 1) {\r\n          stringArray.push(result.join(' '));\r\n        }\r\n\r\n        findPermutation(k + 1);\r\n        flagArray[i] = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  findPermutation(0);\r\n\r\n  const keywords = stringArray.reduce((acc, cur) => {\r\n    const words = createKeywords(cur);\r\n    return [...acc, ...words];\r\n  }, []);\r\n\r\n  return keywords;\r\n};","import React from \"react\";\r\nimport { Row, Col, Button, Typography } from \"antd\";\r\nimport firebase, { auth } from \"../../firebase/config\";\r\nimport { addDocs } from \"../../firebase/service\";\r\nimport { generateKeywords } from \"../../firebase/service\";\r\n\r\nconst { Title } = Typography;\r\nconst fbProvider = new firebase.auth.FacebookAuthProvider();\r\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\nfunction Login() {\r\n  async function handleFbLogin() {\r\n    await auth\r\n      .signInWithPopup(fbProvider)\r\n      .then(function (result) {\r\n        const { additionalUserInfo, user } = result;\r\n        if (additionalUserInfo?.isNewUser) {\r\n          addDocs(\"users\", {\r\n            displayName: user.displayName,\r\n            email: user.email,\r\n            uid: user.uid,\r\n            photoURL: user.photoURL,\r\n            providerID: additionalUserInfo.providerId,\r\n            keywords: generateKeywords(user.displayName),\r\n          });\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error.message, 7000);\r\n      });\r\n  }\r\n  async function handleGoogleLogin() {\r\n    await auth\r\n      .signInWithPopup(googleProvider)\r\n      .then(function (result) {\r\n        const { additionalUserInfo, user } = result;\r\n        if (additionalUserInfo?.isNewUser) {\r\n          addDocs(\"users\", {\r\n            displayName: user.displayName,\r\n            email: user.email,\r\n            uid: user.uid,\r\n            photoURL: user.photoURL,\r\n            providerID: additionalUserInfo.providerId,\r\n            keywords: generateKeywords(user.displayName),\r\n          });\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error.message, 7000);\r\n      });\r\n  }\r\n  return (\r\n    <div>\r\n      <Row justify=\"center\">\r\n        <Col span={6}>\r\n          <Title style={{ textAlign: \"center\" }} level={3}>\r\n            Chat App\r\n          </Title>\r\n          <Button\r\n            style={{ width: \"100%\", marginBottom: 8 }}\r\n            onClick={handleGoogleLogin}\r\n          >\r\n            Sign in with Google\r\n          </Button>\r\n          <Button style={{ width: \"100%\" }} onClick={handleFbLogin}>\r\n            Sign in with FaceBook\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { createContext, useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { auth } from \"../firebase/config\";\r\nimport { Spin } from \"antd\";\r\nimport styled from \"styled-components\";\r\n\r\nconst SpinStyled = styled(Spin)`\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 100px;\r\n`;\r\n\r\nexport const AuthContext = createContext();\r\n\r\nconst Authprovider = ({ children }) => {\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState({});\r\n  const [isLoading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const unsubcribed = auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        const { email, displayName, uid, photoURL } = user;\r\n        setUser({ email, displayName, uid, photoURL });\r\n        setLoading(false);\r\n        navigate(\"/\");\r\n      } else {\r\n        setLoading(false);\r\n        navigate(\"/login\");\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubcribed();\r\n    };\r\n  }, [navigate]);\r\n  return (\r\n    <AuthContext.Provider value={ user }>\r\n      {isLoading ? <SpinStyled size=\"large\" /> : children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default Authprovider;\r\n","import { useContext } from \"react\";\r\nimport { Avatar, Button, Typography } from \"antd\";\r\nimport { LogoutOutlined } from \"@ant-design/icons\";\r\nimport styled from \"styled-components\";\r\nimport { auth } from \"../../firebase/config\";\r\nimport { AuthContext } from \"../../Context/AuthProvider\";\r\n\r\nconst UserInfoStyled = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 15px;\r\n  border-bottom: 1px solid rgba(82, 38, 83);\r\n  .username {\r\n    margin-left: 5px;\r\n    color: white;\r\n  }\r\n`;\r\nconst UserInfo = () => {\r\n  const { displayName, photoURL } = useContext(AuthContext);\r\n\r\n  function handleLogout() {\r\n    auth.signOut();\r\n  }\r\n\r\n  return (\r\n    <UserInfoStyled>\r\n      <div>\r\n        <Avatar\r\n          className=\"avatar\"\r\n          src={photoURL}\r\n          style={{ backgroundColor: \"#f56a00\" }}\r\n        >\r\n          {photoURL ? \"\" : displayName?.charAt(0)?.toUpperCase()}\r\n        </Avatar>\r\n        <Typography.Text className=\"username\">{displayName}</Typography.Text>\r\n      </div>\r\n      <Button ghost icon={<LogoutOutlined />} onClick={handleLogout}>\r\n        Đăng xuất\r\n      </Button>\r\n    </UserInfoStyled>\r\n  );\r\n};\r\n\r\nexport default UserInfo;\r\n","import { useEffect, useState } from \"react\";\r\nimport { db } from \"../firebase/config\";\r\n\r\nconst useFirestore = (collection, condition) => {\r\n  const [documents, setDocument] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let collectionRef = db.collection(collection).orderBy(\"createAt\");\r\n    if (condition && condition.compareValue) {\r\n      collectionRef = collectionRef.where(\r\n        condition.fieldName,\r\n        condition.operator,\r\n        condition.compareValue\r\n      );\r\n    }\r\n    const unsubscribe = collectionRef.onSnapshot((snapshot) => {\r\n      let result = [];\r\n      snapshot.forEach((value) => {\r\n        result.push({ ...value.data(), [\"id\"]: value.id })\r\n      });\r\n      setDocument([...result]);\r\n    });\r\n    return unsubscribe;\r\n  }, [collection, condition]);\r\n  return documents;\r\n};\r\n\r\nexport default useFirestore;\r\n","import { createContext, useState, useContext, useMemo } from \"react\";\r\nimport { AuthContext } from \"./AuthProvider\";\r\nimport useFirestore from \"../hooks/useFirestore\";\r\n\r\nexport const AppContext = createContext();\r\n\r\nconst Appprovider = ({ children }) => {\r\n  const [isVisibleAddRoom, setIsVisibleAddRoom] = useState(false);\r\n  const [isVisibleInviteUser, setIsVisibleInviteUser] = useState(false);\r\n  const [selectedRoomId, setSelectedRoomId] = useState(\"\");\r\n  const { uid } = useContext(AuthContext);\r\n\r\n  const conditionRooms = useMemo(() => {\r\n    return {\r\n      fieldName: \"members\",\r\n      operator: \"array-contains\",\r\n      compareValue: uid,\r\n    };\r\n  }, [uid]);\r\n  const rooms = useFirestore(\"rooms\", conditionRooms);\r\n\r\n  const selectedRoom = useMemo(() => {\r\n    return rooms.find((r) => r.id === selectedRoomId);\r\n  }, [selectedRoomId, rooms]);\r\n\r\n  const conditionUsers = useMemo(() => {\r\n    return {\r\n      fieldName: \"uid\",\r\n      operator: \"in\",\r\n      compareValue: selectedRoom ? selectedRoom.members : [\"\"]\r\n    };\r\n  }, [selectedRoom]);\r\n  const users = useFirestore(\"users\", conditionUsers);\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        rooms,\r\n        users,\r\n        selectedRoom,\r\n        isVisibleAddRoom,\r\n        setIsVisibleAddRoom,\r\n        selectedRoomId,\r\n        setSelectedRoomId,\r\n        isVisibleInviteUser,\r\n        setIsVisibleInviteUser\r\n      }}\r\n    >\r\n      {children}\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\nexport default Appprovider;\r\n","import React from \"react\";\r\nimport { Collapse, Button, Typography } from \"antd\";\r\nimport { PlusSquareOutlined } from \"@ant-design/icons\";\r\nimport styled from \"styled-components\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\n\r\nconst PanelStyled = styled(Collapse.Panel)`\r\n  &&& {\r\n    .ant-collapse-header {\r\n      color: white;\r\n      padding-bottom: 0;\r\n    }\r\n    .ant-typography {\r\n      display: block;\r\n      margin: 10px 17px;\r\n    }\r\n    .ant-typography:first-child {\r\n      margin-top: 0;\r\n    }\r\n    .ant-collapse-content {\r\n      padding-left: 7px;\r\n    }\r\n    .ant-btn {\r\n      color: white;\r\n      &:hover {\r\n        opacity: 0.8;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst RoomList = () => {\r\n  const { setIsVisibleAddRoom, setSelectedRoomId, rooms } =\r\n    React.useContext(AppContext);\r\n  function handleAddRoom() {\r\n    setIsVisibleAddRoom(true);\r\n  }\r\n\r\n  function handleSelectRoom(roomId) {\r\n    setSelectedRoomId(roomId);\r\n  }\r\n  return (\r\n    <Collapse ghost bordered={false} defaultActiveKey={[\"1\"]}>\r\n      <PanelStyled header=\"Danh sách các phòng\" key=\"1\">\r\n        <div>\r\n          {rooms.map((room) => (\r\n            <Typography.Link\r\n              key={room.id}\r\n              onClick={() => handleSelectRoom(room.id)}\r\n            >\r\n              {room.name}\r\n            </Typography.Link>\r\n          ))}\r\n        </div>\r\n        <Button\r\n          type=\"text\"\r\n          onClick={handleAddRoom}\r\n          icon={<PlusSquareOutlined />}\r\n        >\r\n          Thêm phòng\r\n        </Button>\r\n      </PanelStyled>\r\n    </Collapse>\r\n  );\r\n};\r\n\r\nexport default RoomList;\r\n","import React from 'react';\r\nimport { Row, Col } from 'antd';\r\nimport UserInfo from './UserInfo';\r\nimport RoomList from './RoomList';\r\nimport styled from 'styled-components';\r\n\r\nconst SideBarStyled = styled.div`\r\n  background-color: rgb(63, 14, 64);\r\n  color: white;\r\n  height: 100vh;\r\n`\r\n\r\nconst Sidebar = () => {\r\n  return (\r\n    <SideBarStyled>\r\n      <Row>\r\n        <Col span={24}>\r\n          <UserInfo />\r\n        </Col>\r\n        <Col span={24}>\r\n          <RoomList />\r\n        </Col>\r\n      </Row>\r\n    </SideBarStyled>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","import { useContext } from \"react\";\r\nimport { Typography, Button, Avatar, Tooltip } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport { UserAddOutlined } from \"@ant-design/icons\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\n\r\nconst ChatHeaderStyled = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid rgba(82, 38, 83, 0.1);\r\n  .header {\r\n    padding: 5px 10px;\r\n    .header-title {\r\n      margin-bottom: 5px;\r\n    }\r\n    .header-desc {\r\n      font-size: 13px;\r\n    }\r\n  }\r\n  .ant-btn {\r\n    margin-right: 10px;\r\n  }\r\n  .user-box {\r\n    display: flex;\r\n    align-items: center;\r\n    .ant-avatar {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ChatHeader = () => {\r\n  const { selectedRoom, users, setIsVisibleInviteUser } = useContext(AppContext);\r\n  const { name, description } = selectedRoom;\r\n\r\n  function handleInviteUserModal() {\r\n    setIsVisibleInviteUser(true);\r\n  }\r\n\r\n  return (\r\n    <ChatHeaderStyled>\r\n      <div className=\"header\">\r\n        <Typography.Title className=\"header-title\" level={4}>\r\n          {name}\r\n        </Typography.Title>\r\n        <Typography.Text className=\"header-desc\">{description}</Typography.Text>\r\n      </div>\r\n      <div className=\"user-box\">\r\n        <Button shape=\"round\" icon={<UserAddOutlined />} onClick={handleInviteUserModal}>\r\n          Mời\r\n        </Button>\r\n        <Avatar.Group maxCount={3}>\r\n          {users.map((user) => (\r\n            <Tooltip key={user.uid} title={user.displayName} placement=\"bottom\">\r\n              <Avatar\r\n                src={user.photoURL}\r\n                style={{ backgroundColor: \"#87d068\" }}\r\n              >\r\n                {user.photoURL ? \"\" : user.displayName?.charAt(0).toUpperCase()}\r\n              </Avatar>\r\n            </Tooltip>\r\n          ))}\r\n        </Avatar.Group>\r\n      </div>\r\n    </ChatHeaderStyled>\r\n  );\r\n};\r\n\r\nexport default ChatHeader;\r\n","import React from \"react\";\r\nimport { Avatar, Typography } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport { formatRelative } from \"date-fns\";\r\n\r\nconst {Text} = Typography;\r\n\r\nconst MessageStyled = styled.div`\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n  .ant-avatar {\r\n    margin-right: 8px;\r\n  }\r\n  .message-user {\r\n    font-weight: bold;\r\n    margin-right: 5px;\r\n    font-size: 15px;\r\n  }\r\n  &.styleRight {\r\n    margin-left: auto;\r\n  }\r\n`;\r\n\r\nconst TextStyled = styled(Text)`\r\n  font-size: 10px;\r\n`\r\n\r\nconst Message = ({ message, photoURL, displayName, createAt, styleRight }) => {\r\n  console.log(styleRight);\r\n\r\n  function formatDate(seconds) {\r\n    if (seconds) {\r\n      const formattedDate = formatRelative(new Date(seconds * 1000), new Date());\r\n      return formattedDate.charAt(0).toUpperCase() + formattedDate.slice('1');\r\n    }\r\n    else return;\r\n  }\r\n\r\n  return (\r\n    <MessageStyled className={styleRight ? \"styleRight\" : \"\"}>\r\n      <Avatar size={30} src={photoURL}>\r\n        {photoURL ? \"\" : displayName?.charAt(0).toUpperCase()}\r\n      </Avatar>\r\n      <div className=\"message-box\">\r\n        <div className=\"message-info\">\r\n          <span className=\"message-user\">{displayName}</span>\r\n          <TextStyled type=\"secondary\">{formatDate(createAt?.seconds)}</TextStyled>\r\n        </div>\r\n        <span className=\"message-text\">{message}</span>\r\n      </div>\r\n    </MessageStyled>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n\r\n","import { useContext, useMemo, useRef } from \"react\";\r\nimport { Button, Form, Input } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport Message from \"./Message\";\r\nimport { addDocs } from \"../../firebase/service\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\nimport { AuthContext } from \"../../Context/AuthProvider\";\r\nimport useFirestore from \"../../hooks/useFirestore\";\r\n\r\nconst ChatRoomStyled = styled.div`\r\n  height: calc(100% - 66px);\r\n  display: flex;\r\n  flex-flow: column;\r\n  justify-content: flex-end;\r\n  align-item: flex-end;\r\n  padding: 0 10px 10px;\r\n`;\r\n\r\nconst MessageListStyled = styled.div`\r\n  overflow-y: auto;\r\n  height: 100%;\r\n  margin-bottom: 3px;\r\n  display: flex;\r\n  flex-flow: column;\r\n  justify-content: flex-end;\r\n`;\r\nconst MessageInputStyled = styled.div`\r\n  display: flex;\r\n  .ant-input-affix-wrapper {\r\n    padding: 3px 5px;\r\n  }\r\n`;\r\n\r\nconst ChatBox = () => {\r\n  const [form] = Form.useForm();\r\n  const { selectedRoomId } = useContext(AppContext);\r\n  const { displayName, photoURL, uid } = useContext(AuthContext);\r\n  const inputRef = useRef();\r\n\r\n  function sendMessage() {\r\n    const message = form.getFieldValue([\"message\"]);\r\n    if (message) {\r\n      form.resetFields();\r\n      addDocs(\"message\", {\r\n        roomId: selectedRoomId,\r\n        displayName,\r\n        photoURL,\r\n        uid,\r\n        message,\r\n      });\r\n      inputRef.current.focus();\r\n    }\r\n  }\r\n\r\n  const condition = useMemo(() => {\r\n    return {\r\n      fieldName: \"roomId\",\r\n      operator: \"==\",\r\n      compareValue: selectedRoomId,\r\n    };\r\n  }, [selectedRoomId]);\r\n  const messages = useFirestore(\"message\", condition);\r\n  function handleKeyDown(e) {\r\n    if (e.key === \"Enter\") {\r\n      sendMessage();\r\n    }\r\n  }\r\n  function handleSendMessage() {\r\n    sendMessage();\r\n  }\r\n  return (\r\n    <ChatRoomStyled>\r\n      <MessageListStyled>\r\n        {messages.map((message) => (\r\n          <Message\r\n            styleRight={uid === message.uid ? true : false}\r\n            key={message.id}\r\n            message={message.message}\r\n            photoURL={message.photoURL}\r\n            displayName={message.displayName}\r\n            createAt={message.createAt}\r\n          ></Message>\r\n        ))}\r\n      </MessageListStyled>\r\n      <MessageInputStyled>\r\n        <Form form={form} style={{ width: \"100%\" }} onKeyDown={handleKeyDown}>\r\n          <Form.Item name=\"message\">\r\n            <Input\r\n              ref={inputRef}\r\n              autoFocus=\"autofocus\"\r\n              autoComplete=\"off\"\r\n              placeholder=\"Nhập tin nhắn ...\"\r\n              suffix={\r\n                <Button type=\"primary\" onClick={handleSendMessage}>\r\n                  Gửi\r\n                </Button>\r\n              }\r\n            ></Input>\r\n          </Form.Item>\r\n        </Form>\r\n      </MessageInputStyled>\r\n    </ChatRoomStyled>\r\n  );\r\n};\r\n\r\nexport default ChatBox;\r\n","import { useContext } from \"react\";\r\nimport ChatHeader from \"./ChatHeader\";\r\nimport ChatBox from \"./ChatBox\";\r\nimport styled from \"styled-components\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\nimport { Alert } from \"antd\";\r\n\r\nconst ChatWindowsStyled = styled.div`\r\n  height: 100vh;\r\n  padding: 5px;\r\n`;\r\n\r\nconst ChatWindows = () => {\r\n  const { selectedRoom } = useContext(AppContext);\r\n  return (\r\n    <ChatWindowsStyled>\r\n      {selectedRoom ? (\r\n        <>\r\n          <ChatHeader />\r\n          <ChatBox />\r\n        </>\r\n      ) : (\r\n        <Alert message=\"Hãy chọn phòng!!\" type=\"info\" closable showIcon></Alert>\r\n      )}\r\n    </ChatWindowsStyled>\r\n  );\r\n};\r\n\r\nexport default ChatWindows;\r\n","import React from 'react';\r\nimport SideBar from './SideBar';\r\nimport ChatWindows from './ChatWindows';\r\nimport { Row, Col } from 'antd';\r\n\r\nconst ChatRoom = () => {\r\n  return (\r\n    <div>\r\n      <Row>\r\n        <Col span={6}>\r\n          <SideBar></SideBar>\r\n        </Col>\r\n        <Col span={18}>\r\n          <ChatWindows></ChatWindows>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatRoom;\r\n","import { useContext } from \"react\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\nimport { Modal, Form, Input } from \"antd\";\r\nimport { addDocs } from \"../../firebase/service\";\r\nimport { AuthContext } from \"../../Context/AuthProvider\";\r\n\r\nconst AddRoomModal = () => {\r\n  const { isVisibleAddRoom, setIsVisibleAddRoom } = useContext(AppContext);\r\n  const { uid } = useContext(AuthContext);\r\n  const [form] = Form.useForm();\r\n\r\n  function addRoom() {\r\n    try {\r\n      form\r\n        .validateFields([\"name\", \"description\"])\r\n        .then((values) => {\r\n          setIsVisibleAddRoom(false);\r\n          form.resetFields();\r\n          addDocs(\"rooms\", { ...values, members: [uid] });\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } catch (errorInfo) {\r\n      console.log(\"Failed:\", errorInfo);\r\n    }\r\n  }\r\n  function handleOk() {\r\n    addRoom();\r\n  }\r\n  function handleAddRoomKeyDown(e) {\r\n    if (e.key === \"Enter\") {\r\n      addRoom();\r\n    }\r\n  }\r\n  function handleCancel() {\r\n    setIsVisibleAddRoom(false);\r\n  }\r\n  return (\r\n    <Modal\r\n      title=\"Thêm phòng\"\r\n      visible={isVisibleAddRoom}\r\n      onOk={handleOk}\r\n      onCancel={handleCancel}\r\n    >\r\n      <Form form={form} layout=\"vertical\" onKeyDown={handleAddRoomKeyDown}>\r\n        <Form.Item\r\n          name=\"name\"\r\n          label=\"Tên phòng\"\r\n          rules={[{ required: true, message: \"Vui lòng nhập tên phòng\" }]}\r\n        >\r\n          <Input placeholder=\"Nhập tên phòng\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"description\"\r\n          label=\"Mô tả\"\r\n          rules={[{ required: true, message: \"Vui lòng nhập mô tả\" }]}\r\n        >\r\n          <Input placeholder=\"Nhập mô tả\" />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default AddRoomModal;\r\n","import { useContext, useState, useEffect, useMemo } from \"react\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\nimport { Form, Modal, Select, Spin, Avatar } from \"antd\";\r\nimport { db } from \"../../firebase/config\";\r\nimport { debounce } from \"lodash\";\r\n\r\nfunction DebounceSelect({\r\n  fetchOptions,\r\n  debounceTimeout = 300,\r\n  curMembers,\r\n  options,\r\n  setOptions,\r\n  ...props\r\n}) {\r\n  const [fetching, setFetching] = useState(false);\r\n\r\n  const debounceFetcher = useMemo(() => {\r\n    const loadOptions = (value) => {\r\n      setOptions([]);\r\n      setFetching(true);\r\n\r\n      fetchOptions(value, curMembers).then((newOptions) => {\r\n        setOptions(newOptions);\r\n        setFetching(false);\r\n      });\r\n    };\r\n\r\n    return debounce(loadOptions, debounceTimeout);\r\n  }, [debounceTimeout, fetchOptions, curMembers, setOptions]);\r\n  useEffect(() => {\r\n      // clear when unmount\r\n      setOptions([]);\r\n  }, [setOptions]);\r\n\r\n  return (\r\n    <Select\r\n      labelInValue\r\n      filterOption={false}\r\n      onSearch={debounceFetcher}\r\n      notFoundContent={fetching ? <Spin size=\"small\" /> : null}\r\n      {...props}\r\n    >\r\n      {options.map((opt) => (\r\n        <Select.Option key={opt.value} value={opt.value} title={opt.label}>\r\n          <Avatar size=\"small\" src={opt.photoURL}>\r\n            {opt.photoURL ? \"\" : opt.label?.charAt(0)?.toUpperCase()}\r\n          </Avatar>\r\n          {` ${opt.label}`}\r\n        </Select.Option>\r\n      ))}\r\n    </Select>\r\n  );\r\n}\r\n\r\nfunction lowerCase(str) {\r\n  var splitStr = str\r\n    .toLowerCase()\r\n    .split(\" \")\r\n    .filter((w) => w !== \"\");\r\n  return splitStr.join(\" \");\r\n}\r\n\r\nasync function fetchUserList(search, curMembers) {\r\n  const valueCompare = lowerCase(search);\r\n  return db\r\n    .collection(\"users\")\r\n    .where(\"keywords\", \"array-contains\", valueCompare)\r\n    .orderBy(\"displayName\")\r\n    .limit(20)\r\n    .get()\r\n    .then((snapshot) => {\r\n      return snapshot.docs\r\n        .map((doc) => ({\r\n          label: doc.data().displayName,\r\n          value: doc.data().uid,\r\n          photoURL: doc.data().photoURL,\r\n        }))\r\n        .filter((opt) => !curMembers.includes(opt.value));\r\n    });\r\n}\r\n\r\nconst InviteUserModal = () => {\r\n  const {\r\n    isVisibleInviteUser,\r\n    setIsVisibleInviteUser,\r\n    selectedRoomId,\r\n    selectedRoom,\r\n  } = useContext(AppContext);\r\n  const [value, setValue] = useState([]);\r\n  const [options, setOptions] = useState([]);\r\n  const [form] = Form.useForm();\r\n\r\n  const handleOk = () => {\r\n    // reset form value\r\n    form.resetFields();\r\n    setValue([]);\r\n    setOptions([]);\r\n\r\n    // update members in current room\r\n    const roomRef = db.collection(\"rooms\").doc(selectedRoomId);\r\n\r\n    roomRef.update({\r\n      members: [...selectedRoom.members, ...value.map((val) => val.value)],\r\n    });\r\n\r\n    setIsVisibleInviteUser(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    // reset form value\r\n    form.resetFields();\r\n    setValue([]);\r\n    setOptions([]);\r\n\r\n    setIsVisibleInviteUser(false);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title=\"Mời thêm thành viên\"\r\n      visible={isVisibleInviteUser}\r\n      onOk={handleOk}\r\n      onCancel={handleCancel}\r\n    >\r\n      <Form form={form}>\r\n        <DebounceSelect\r\n          options={options}\r\n          setOptions={setOptions}\r\n          mode=\"multiple\"\r\n          name=\"search-user\"\r\n          label=\"Tên các thành viên\"\r\n          value={value}\r\n          placeholder=\"Nhập tên thành viên\"\r\n          fetchOptions={fetchUserList}\r\n          onChange={(newValue) => setValue(newValue)}\r\n          style={{ width: \"100%\" }}\r\n          curMembers={selectedRoom ? selectedRoom.members : []}\r\n        />\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default InviteUserModal;\r\n","import Login from \"./components/Login\";\nimport ChatRoom from \"./components/ChatRoom\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport AuthProvider from \"./Context/AuthProvider\";\nimport Appprovider from \"./Context/AppProvider\";\nimport AddRoom from \"./components/Modal/AddRoomModal\";\nimport InviteUser from \"./components/Modal/InviteUserModal\";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <Appprovider>\n          <Routes>\n            <Route path=\"/login\" element={<Login />} />\n            <Route path=\"/\" element={<ChatRoom />} />\n          </Routes>\n          <AddRoom />\n          <InviteUser />\n        </Appprovider>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}